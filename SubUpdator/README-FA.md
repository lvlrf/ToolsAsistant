# ğŸŒ Sub-Relay System

Ø³ÛŒØ³ØªÙ… Relay Ø¨Ø±Ø§ÛŒ Subscription Link Ù…Ø±Ø²Ø¨Ø§Ù† - Ø¯Ùˆ Ù…Ø¯Ù„ WireGuard Ùˆ Xray Ø¨Ø§ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯

---

## ğŸ“– ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨

- [Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡](#Ø¯Ø±Ø¨Ø§Ø±Ù‡-Ù¾Ø±ÙˆÚ˜Ù‡)
- [Ù…Ø¹Ù…Ø§Ø±ÛŒ](#Ù…Ø¹Ù…Ø§Ø±ÛŒ)
- [Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§](#Ù¾ÛŒØ´Ù†ÛŒØ§Ø²Ù‡Ø§)
- [Ù†ØµØ¨](#Ù†ØµØ¨)
- [ØªÙ†Ø¸ÛŒÙ…Ø§Øª](#ØªÙ†Ø¸ÛŒÙ…Ø§Øª)
- [Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ](#Ø±Ø§Ù‡Ø§Ù†Ø¯Ø§Ø²ÛŒ)
- [Ù…Ø¯ÛŒØ±ÛŒØª](#Ù…Ø¯ÛŒØ±ÛŒØª)
- [Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ](#Ø¹ÛŒØ¨ÛŒØ§Ø¨ÛŒ)
- [Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„](#Ø³ÙˆØ§Ù„Ø§Øª-Ù…ØªØ¯Ø§ÙˆÙ„)

---

## ğŸ“ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡

Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø§ÛŒ Ø­Ù„ Ù…Ø´Ú©Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¨Ù‡ subscription link Ù¾Ù†Ù„ Ù…Ø±Ø²Ø¨Ø§Ù† Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡. Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ†ØªØ±Ø§Ù†ØªØŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ Ù…ØªØµÙ„ Ø´ÙˆÙ†Ø¯. Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… ÛŒÚ© relay Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø§ÛŒØ±Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ú©Ù‡:

âœ… Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ù‡ Ø¬Ø§ÛŒ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ØŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø§ÛŒØ±Ø§Ù† Ù…ØªØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯  
âœ… Ø³Ø±ÙˆØ± Ø§ÛŒØ±Ø§Ù† Ø§Ø² Ø·Ø±ÛŒÙ‚ ØªØ§Ù†Ù„ (WireGuard ÛŒØ§ Xray) Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ ÙˆØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯  
âœ… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ subscription Ø§Ø² ØªØ§Ù†Ù„ Ø¹Ø¨ÙˆØ± Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯  
âœ… Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ù„ÛŒ Ø´Ù…Ø§ Ù‡Ù…Ú†Ù†Ø§Ù† Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯  

**ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§:**
- ğŸ”€ Ø¯Ùˆ Ù…Ø¯Ù„ ØªØ§Ù†Ù„: WireGuard (Ø³Ø±ÛŒØ¹â€ŒØªØ±) Ùˆ Xray SOCKS5 (Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ØªØ±)
- ğŸ›ï¸ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙˆØ¨ Ø¨Ø±Ø§ÛŒ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ùˆ ØªØºÛŒÛŒØ± Ù…Ø¯Ù„
- ğŸ”„ ØªØºÛŒÛŒØ± Ø¢Ø³Ø§Ù† Ø¨ÛŒÙ† Ø¯Ùˆ Ù…Ø¯Ù„ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù…Ø¬Ø¯Ø¯
- ğŸ›¡ï¸ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² HAProxy Ø¨Ø±Ø§ÛŒ SNI routing
- ğŸ“Š Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø²Ù†Ø¯Ù‡ Ø§ØªØµØ§Ù„Ø§Øª Ùˆ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§

---

## ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Ú©Ø§Ø±Ø¨Ø± Ø§ÛŒØ±Ø§Ù†   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ :443
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ HAProxy â”‚ â—„â”€â”€ SNI Routing
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                           â”‚
    â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tunnel  â”‚              â”‚ Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ù„ÛŒ   â”‚
â”‚ Backend â”‚              â”‚ (Ù¾ÙˆØ±Øª 8443)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mode A: WireGuard   â”‚
â”‚  â†’ IP ØªØ§Ù†Ù„           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         ÛŒØ§
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mode B: Xray        â”‚
â”‚  â†’ Nginx â†’ SOCKS5    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Ø³Ø±ÙˆØ±   â”‚
    â”‚  Ø®Ø§Ø±Ø¬   â”‚
    â”‚ Ù…Ø±Ø²Ø¨Ø§Ù†  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ØªÙˆØ¶ÛŒØ­ Ø¬Ø±ÛŒØ§Ù†:

1. **Ú©Ø§Ø±Ø¨Ø±** Ø¨Ù‡ `melodyurl.giftchi.link:443` Ù…ØªØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
2. **HAProxy** Ø¨Ø± Ø§Ø³Ø§Ø³ SNI ØªØ´Ø®ÛŒØµ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ø±Ø§ÛŒ Ú©Ø¯Ø§Ù… Ø³Ø±ÙˆÛŒØ³ Ø§Ø³Øª
3. Ø§Ú¯Ø± SNI Ø¨Ø±Ø§Ø¨Ø± `melodyurl.giftchi.link` Ø¨Ø§Ø´Ø¯ â†’ Ø¨Ù‡ ØªØ§Ù†Ù„ Ù…ÛŒâ€ŒÙØ±Ø³ØªØ¯
4. Ø§Ú¯Ø± SNI Ø¨Ø±Ø§Ø¨Ø± `xray.giftchi.link` Ø¨Ø§Ø´Ø¯ â†’ Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ù„ÛŒ Ù…ÛŒâ€ŒÙØ±Ø³ØªØ¯
5. **ØªØ§Ù†Ù„** (WireGuard ÛŒØ§ Xray) Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø§ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ Ù…Ù†ØªÙ‚Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯

---

## ğŸ“‹ Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§

### Ø³Ø±ÙˆØ± Ø§ÛŒØ±Ø§Ù†:
- Ubuntu 20.04+ / Debian 11+
- Ø¯Ø³ØªØ±Ø³ÛŒ root
- Ù¾ÙˆØ±Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²: 443ØŒ 8080
- Ø­Ø¯Ø§Ù‚Ù„ 1 CPUØŒ 1GB RAM

### Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ (Ù¾Ù†Ù„ Ù…Ø±Ø²Ø¨Ø§Ù†):
- WireGuard Ù†ØµØ¨ Ø´Ø¯Ù‡ (Ø¨Ø±Ø§ÛŒ Mode A)
- ÛŒØ§ ÛŒÚ© Ú©Ø§Ù†Ú©Ø´Ù† VLESS/VMess ÙØ¹Ø§Ù„ (Ø¨Ø±Ø§ÛŒ Mode B)
- Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù¾Ù†Ù„ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ú©Ø§Ù†Ú©Ø´Ù†

### Ø¯Ø§Ù…Ù†Ù‡:
- ÛŒÚ© Ø¯Ø§Ù…Ù†Ù‡ ÛŒØ§ subdomain Ø¨Ø±Ø§ÛŒ subscription (Ù…Ø«Ù„Ø§Ù‹ `melodyurl.giftchi.link`)
- Ø±Ú©ÙˆØ±Ø¯ A Ú©Ù‡ Ø¨Ù‡ IP Ø³Ø±ÙˆØ± Ø§ÛŒØ±Ø§Ù† Ø§Ø´Ø§Ø±Ù‡ Ú©Ù†Ø¯
- Ú¯ÙˆØ§Ù‡ÛŒ SSL (Ø§Ø² Let's Encrypt)

---

## ğŸš€ Ù†ØµØ¨

### 1ï¸âƒ£ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù¾Ø±ÙˆÚ˜Ù‡

```bash
# Ø§ÛŒØ¬Ø§Ø¯ Ù¾ÙˆØ´Ù‡ Ùˆ Ø±ÙØªÙ† Ø¨Ù‡ Ø¢Ù†
mkdir -p /opt/sub-relay
cd /opt/sub-relay

# Ú©Ù¾ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ù‡ Ø§ÛŒÙ†Ø¬Ø§
# (ÛŒØ§ git clone Ø§Ú¯Ø± repository Ø¯Ø§Ø±ÛŒ)
```

### 2ï¸âƒ£ Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù†ØµØ¨

```bash
chmod +x install.sh
./install.sh
```

Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù†ØµØ¨ Ø§ÛŒÙ† Ú©Ø§Ø±Ù‡Ø§ Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯Ù‡Ø¯:
- Ù†ØµØ¨ Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§ (HAProxyØŒ NginxØŒ PythonØŒ WireGuardØŒ Xray)
- Ø³Ø§Ø®Øª Ù…Ø­ÛŒØ· Ù…Ø¬Ø§Ø²ÛŒ Python Ø¨Ø±Ø§ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
- Ø«Ø¨Øª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ systemd
- Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù†ÙÛŒÚ¯

---

## âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª

### 1ï¸âƒ£ ÙˆÛŒØ±Ø§ÛŒØ´ ÙØ§ÛŒÙ„ config.env

```bash
nano /opt/sub-relay/config.env
```

**ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¶Ø±ÙˆØ±ÛŒ Ú©Ù‡ Ø¨Ø§ÛŒØ¯ Ù¾Ø± Ú©Ù†ÛŒØ¯:**

```bash
# Ù…Ø¯Ù„ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ (wireguard ÛŒØ§ xray)
ACTIVE_MODE="wireguard"

# Ø¯Ø§Ù…Ù†Ù‡ subscription
SUB_DOMAIN="melodyurl.giftchi.link"

# Ø¢Ø¯Ø±Ø³ Ù¾Ù†Ù„ Ù…Ø±Ø²Ø¨Ø§Ù†
PANEL_URL="https://vdash.giftchi.link"

# SNI Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ù„ÛŒ
EXISTING_SNI="xray.giftchi.link"
```

**Ø¨Ø±Ø§ÛŒ Ù…Ø¯Ù„ WireGuard:**

```bash
WG_SERVER_PUBLIC_KEY="YOUR_SERVER_PUBLIC_KEY"
WG_SERVER_ENDPOINT="SERVER_IP:51820"
WG_CLIENT_PRIVATE_KEY="YOUR_CLIENT_PRIVATE_KEY"
WG_CLIENT_IP="10.66.66.2/32"
WG_SERVER_IP="10.66.66.1"
```

**Ø¨Ø±Ø§ÛŒ Ù…Ø¯Ù„ Xray:**

```bash
XRAY_SERVER_ADDRESS="vdash.giftchi.link"
XRAY_SERVER_PORT="443"
XRAY_UUID="YOUR_UUID"
XRAY_WS_PATH="/ws"
XRAY_SNI="vdash.giftchi.link"
```

### 2ï¸âƒ£ Ø¯Ø±ÛŒØ§ÙØª Ú¯ÙˆØ§Ù‡ÛŒ SSL

```bash
# Ù†ØµØ¨ certbot (Ø§Ú¯Ø± Ù†ØµØ¨ Ù†ÛŒØ³Øª)
apt install certbot -y

# Ø¯Ø±ÛŒØ§ÙØª Ú¯ÙˆØ§Ù‡ÛŒ
certbot certonly --standalone -d melodyurl.giftchi.link
```

**Ù†Ú©ØªÙ‡:** Ù‚Ø¨Ù„ Ø§Ø² Ø§ÛŒÙ† Ú©Ø§Ø± Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯:
- Ø±Ú©ÙˆØ±Ø¯ DNS Ø¨Ù‡ IP Ø³Ø±ÙˆØ± Ø´Ù…Ø§ Ø§Ø´Ø§Ø±Ù‡ Ø¯Ø§Ø±Ø¯
- Ù¾ÙˆØ±Øª 80 Ø¨Ø§Ø² Ø§Ø³Øª (certbot Ù…ÙˆÙ‚ØªØ§Ù‹ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯)

### 3ï¸âƒ£ ØªÙ†Ø¸ÛŒÙ… ØªØ§Ù†Ù„

#### Ø¨Ø±Ø§ÛŒ WireGuard:

**Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬:**

```bash
# Ù†ØµØ¨ WireGuard
apt install wireguard -y

# ØªÙˆÙ„ÛŒØ¯ Ú©Ù„ÛŒØ¯ Ø³Ø±ÙˆØ±
wg genkey | tee server-private.key | wg pubkey > server-public.key

# Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù„ÛŒØ¯Ù‡Ø§
cat server-private.key  # Ø§ÛŒÙ† Ø±Ùˆ Ø¬Ø§ÛŒÛŒ Ø§Ù…Ù† Ù†Ú¯Ù‡ Ø¯Ø§Ø±
cat server-public.key   # Ø§ÛŒÙ† Ø±Ùˆ Ø¯Ø± config.env Ø³Ø±ÙˆØ± Ø§ÛŒØ±Ø§Ù† Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡
```

**Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø§ÛŒØ±Ø§Ù†:**

```bash
# ØªÙˆÙ„ÛŒØ¯ Ú©Ù„ÛŒØ¯ Ú©Ù„Ø§ÛŒÙ†Øª
wg genkey | tee client-private.key | wg pubkey > client-public.key

# Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ù„ÛŒØ¯Ù‡Ø§
cat client-private.key  # Ø§ÛŒÙ† Ø±Ùˆ Ø¯Ø± config.env Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡
cat client-public.key   # Ø§ÛŒÙ† Ø±Ùˆ Ø¨Ù‡ Ú©Ø§Ù†ÙÛŒÚ¯ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†
```

**Ú©Ø§Ù†ÙÛŒÚ¯ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬** (`/etc/wireguard/wg0.conf`):

```ini
[Interface]
PrivateKey = SERVER_PRIVATE_KEY
Address = 10.66.66.1/24
ListenPort = 51820
PostUp = sysctl -w net.ipv4.ip_forward=1
PostUp = iptables -A FORWARD -i wg0 -j ACCEPT
PostUp = iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

[Peer]
PublicKey = CLIENT_PUBLIC_KEY
AllowedIPs = 10.66.66.2/32
PersistentKeepalive = 25
```

```bash
# ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ WireGuard Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬
systemctl enable wg-quick@wg0
systemctl start wg-quick@wg0

# Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù¾ÙˆØ±Øª
ufw allow 51820/udp
```

#### Ø¨Ø±Ø§ÛŒ Xray:

1. Ø¯Ø± Ù¾Ù†Ù„ Ù…Ø±Ø²Ø¨Ø§Ù† ÛŒÚ© Ú©Ø§Ù†Ú©Ø´Ù† VLESS/VMess Ø¨Ø³Ø§Ø²
2. Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù†Ú©Ø´Ù† (UUIDØŒ SNIØŒ Path) Ø±Ø§ Ø¯Ø± `config.env` Ù‚Ø±Ø§Ø± Ø¨Ø¯Ù‡

---

## ğŸ¬ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

### 1ï¸âƒ£ Ø¬Ø§Ø¨Ø¬Ø§ÛŒÛŒ Ø³Ø±ÙˆÛŒØ³ ÙØ¹Ù„ÛŒ

Ø§Ú¯Ø± Ø³Ø±ÙˆÛŒØ³ Xray ÛŒØ§ V2Ray Ø´Ù…Ø§ Ø±ÙˆÛŒ Ù¾ÙˆØ±Øª 443 Ø§Ø³ØªØŒ Ø§Ø¨ØªØ¯Ø§ Ø¢Ù† Ø±Ø§ Ø¨Ù‡ Ù¾ÙˆØ±Øª 8443 Ù…Ù†ØªÙ‚Ù„ Ú©Ù†ÛŒØ¯:

```bash
# ÙˆÛŒØ±Ø§ÛŒØ´ Ú©Ø§Ù†ÙÛŒÚ¯ Xray
nano /usr/local/etc/xray/config.json

# Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒØ¯: "port": 443
# ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯ Ø¨Ù‡: "port": 8443

# Ø±ÛŒØ³ØªØ§Ø±Øª Xray
systemctl restart xray
```

### 2ï¸âƒ£ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ ÛŒÚ©ÛŒ Ø§Ø² Ù…Ø¯Ù„â€ŒÙ‡Ø§

```bash
# ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¯Ù„ WireGuard
/opt/sub-relay/switch-mode.sh wireguard

# ÛŒØ§ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù…Ø¯Ù„ Xray
/opt/sub-relay/switch-mode.sh xray
```

### 3ï¸âƒ£ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª

```bash
# Ú†Ú© Ú©Ø±Ø¯Ù† Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
systemctl status haproxy
systemctl status sub-relay-dashboard

# Ø¨Ø±Ø§ÛŒ WireGuard:
systemctl status wg-quick@wg0

# Ø¨Ø±Ø§ÛŒ Xray:
systemctl status xray-client
systemctl status nginx
```

### 4ï¸âƒ£ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯

Ù…Ø±ÙˆØ±Ú¯Ø± Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯ Ùˆ Ø¨Ù‡ Ø§ÛŒÙ† Ø¢Ø¯Ø±Ø³ Ø¨Ø±ÙˆÛŒØ¯:

```
http://YOUR_SERVER_IP:8080
```

---

## ğŸ›ï¸ Ù…Ø¯ÛŒØ±ÛŒØª

### ØªØºÛŒÛŒØ± Ø¨ÛŒÙ† Ø¯Ùˆ Ù…Ø¯Ù„

```bash
# ØªØºÛŒÛŒØ± Ø¨Ù‡ WireGuard
/opt/sub-relay/switch-mode.sh wireguard

# ØªØºÛŒÛŒØ± Ø¨Ù‡ Xray
/opt/sub-relay/switch-mode.sh xray
```

ÛŒØ§ Ø§Ø² Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙˆØ¨ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ "ØªØºÛŒÛŒØ± Ø¨Ù‡ WireGuard" ÛŒØ§ "ØªØºÛŒÛŒØ± Ø¨Ù‡ Xray" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.

### Ø±ÛŒØ³ØªØ§Ø±Øª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§

```bash
# Ø±ÛŒØ³ØªØ§Ø±Øª HAProxy
systemctl restart haproxy

# Ø±ÛŒØ³ØªØ§Ø±Øª Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
systemctl restart sub-relay-dashboard

# Ø±ÛŒØ³ØªØ§Ø±Øª WireGuard
systemctl restart wg-quick@wg0

# Ø±ÛŒØ³ØªØ§Ø±Øª Xray
systemctl restart xray-client
```

### Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§

```bash
# Ù„Ø§Ú¯ HAProxy
journalctl -u haproxy -f

# Ù„Ø§Ú¯ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
journalctl -u sub-relay-dashboard -f

# Ù„Ø§Ú¯ WireGuard
journalctl -u wg-quick@wg0 -f

# Ù„Ø§Ú¯ Xray
journalctl -u xray-client -f
```

---

## ğŸ”§ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„: ØªØ§Ù†Ù„ WireGuard Ù…ØªØµÙ„ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

```bash
# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
wg show wg0

# Ú†Ú© Ú©Ø±Ø¯Ù† ping
ping 10.66.66.1

# Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒØ±ÙˆØ§Ù„ Ø³Ø±ÙˆØ± Ø®Ø§Ø±Ø¬
# Ù…Ø·Ù…Ø¦Ù† Ø´ÙˆÛŒØ¯ Ù¾ÙˆØ±Øª 51820/udp Ø¨Ø§Ø² Ø§Ø³Øª
```

### Ù…Ø´Ú©Ù„: Xray SOCKS5 Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯

```bash
# ØªØ³Øª SOCKS5
curl -x socks5://127.0.0.1:1080 https://www.google.com

# Ù„Ø§Ú¯ Xray
journalctl -u xray-client -n 50

# Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÙˆØ±Øª
netstat -tlnp | grep 1080
```

### Ù…Ø´Ú©Ù„: HAProxy ØªØ±Ø§ÙÛŒÚ© Ø±Ø§ forward Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯

```bash
# Ù„Ø§Ú¯ HAProxy
tail -f /var/log/haproxy.log

# ØªØ³Øª SNI
openssl s_client -connect 127.0.0.1:443 -servername melodyurl.giftchi.link

# Ú†Ú© Ú©Ø±Ø¯Ù† Ú©Ø§Ù†ÙÛŒÚ¯
haproxy -c -f /etc/haproxy/haproxy.cfg
```

### Ù…Ø´Ú©Ù„: Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¨Ø§Ø² Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

```bash
# Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª
systemctl status sub-relay-dashboard

# Ø¨Ø±Ø±Ø³ÛŒ Ù¾ÙˆØ±Øª
netstat -tlnp | grep 8080

# Ø±ÛŒØ³ØªØ§Ø±Øª
systemctl restart sub-relay-dashboard
```

---

## â“ Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„

### Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ù‡Ø± Ø¯Ùˆ Ù…Ø¯Ù„ Ø±Ø§ Ù‡Ù…Ø²Ù…Ø§Ù† ÙØ¹Ø§Ù„ Ú©Ù†Ù…ØŸ

Ø®ÛŒØ±ØŒ Ø¯Ø± Ù‡Ø± Ù„Ø­Ø¸Ù‡ ÙÙ‚Ø· ÛŒÚ©ÛŒ Ø§Ø² Ø¯Ùˆ Ù…Ø¯Ù„ ÙØ¹Ø§Ù„ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ ØªØºÛŒÛŒØ± Ø§Ø² Ø§Ø³Ú©Ø±ÛŒÙ¾Øª `switch-mode.sh` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

### Ú©Ø¯Ø§Ù… Ù…Ø¯Ù„ Ø¨Ù‡ØªØ± Ø§Ø³ØªØŸ

- **WireGuard:** Ø³Ø±ÛŒØ¹â€ŒØªØ±ØŒ Ú©Ù…â€ŒØ­Ø¬Ù…â€ŒØªØ±ØŒ Ù…ØµØ±Ù CPU Ú©Ù…ØªØ± - ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- **Xray:** Ø§Ù†Ø¹Ø·Ø§Ùâ€ŒÙ¾Ø°ÛŒØ±ØªØ±ØŒ Ù‚Ø§Ø¨Ù„ÛŒØª obfuscation Ø¨ÛŒØ´ØªØ±

### Ú†Ø·ÙˆØ± subscription link Ø±Ø§ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø¯Ù‡Ù…ØŸ

Ø¨Ù‡ Ø¬Ø§ÛŒ Ù„ÛŒÙ†Ú© Ù¾Ù†Ù„ Ø§ØµÙ„ÛŒØŒ Ø§ÛŒÙ† Ù„ÛŒÙ†Ú© Ø±Ø§ Ø¨Ø¯Ù‡ÛŒØ¯:

```
https://melodyurl.giftchi.link/sub/YOUR_TOKEN
```

### Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ú†Ù†Ø¯ Ø¯Ø§Ù…Ù†Ù‡ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù…ØŸ

Ø¨Ù„Ù‡ØŒ Ø¯Ø± Ú©Ø§Ù†ÙÛŒÚ¯ HAProxy Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ú†Ù†Ø¯ÛŒÙ† SNI Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.

### Ú†Ø·ÙˆØ± Ù¾ÙˆØ±Øª Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡Ù…ØŸ

Ø¯Ø± `config.env` Ù…Ù‚Ø¯Ø§Ø± `DASHBOARD_PORT` Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯ Ùˆ Ø³Ø±ÙˆÛŒØ³ Ø±Ø§ Ø±ÛŒØ³ØªØ§Ø±Øª Ú©Ù†ÛŒØ¯.

---

## ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ

- Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù…: [@drconnect](https://t.me/drconnect)
- Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ: `+98 912 741 9412`

---

## ğŸ“„ Ù„Ø§ÛŒØ³Ù†Ø³

Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ ØªØ­Øª Ù„Ø§ÛŒØ³Ù†Ø³ MIT Ù…Ù†ØªØ´Ø± Ø´Ø¯Ù‡ Ø§Ø³Øª.

---

**Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ ØªÙˆØ³Ø· DrConnect**
