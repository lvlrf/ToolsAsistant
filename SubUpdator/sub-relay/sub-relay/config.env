# ===================================
# تنظیمات اصلی Sub-Relay
# ===================================
# این فایل رو ویرایش کن و مقادیر واقعی رو جایگزین کن

# --- مدل فعال ---
# گزینه‌ها: "wireguard" یا "xray"
ACTIVE_MODE="wireguard"

# --- تنظیمات دامنه و پنل ---
# دامنه‌ای که برای subscription استفاده میشه
SUB_DOMAIN="melodyurl.giftchi.link"

# آدرس پنل مرزبان روی سرور خارج
PANEL_URL="https://vdash.giftchi.link"

# مسیر subscription در پنل (مثلاً /sub/ یا /api/subscription/)
SUB_PATH="/sub/"

# SNI سرویس فعلی که روی پورت 443 داری (برای fallback)
EXISTING_SNI="xray.giftchi.link"

# --- تنظیمات SSL ---
# مسیر گواهی SSL (بعد از گرفتن با certbot)
SSL_CERT_PATH="/etc/letsencrypt/live/${SUB_DOMAIN}/fullchain.pem"
SSL_KEY_PATH="/etc/letsencrypt/live/${SUB_DOMAIN}/privkey.pem"

# --- تنظیمات WireGuard (Mode A) ---
# کلید عمومی سرور WireGuard (روی سرور خارج)
WG_SERVER_PUBLIC_KEY="PASTE_SERVER_PUBLIC_KEY_HERE"

# IP و پورت سرور WireGuard
WG_SERVER_ENDPOINT="SERVER_EXTERNAL_IP:51820"

# کلید خصوصی کلاینت WireGuard (روی سرور ایران)
WG_CLIENT_PRIVATE_KEY="PASTE_CLIENT_PRIVATE_KEY_HERE"

# IP کلاینت در شبکه WireGuard
WG_CLIENT_IP="10.66.66.2/32"

# IP سرور در شبکه WireGuard (برای routing)
WG_SERVER_IP="10.66.66.1"

# --- تنظیمات Xray (Mode B) ---
# آدرس و پورت سرور Xray
XRAY_SERVER_ADDRESS="vdash.giftchi.link"
XRAY_SERVER_PORT="443"

# UUID کانکشن Xray
XRAY_UUID="PASTE_YOUR_UUID_HERE"

# مسیر WebSocket
XRAY_WS_PATH="/ws"

# SNI برای TLS
XRAY_SNI="vdash.giftchi.link"

# پورت محلی SOCKS5
XRAY_SOCKS_PORT="1080"

# --- تنظیمات داشبورد ---
# پورت داشبورد وب
DASHBOARD_PORT="8080"

# نام کاربری و رمز داشبورد (اختیاری - فعلاً استفاده نمیشه)
DASHBOARD_USER="admin"
DASHBOARD_PASS="changeme"

# --- پورت‌های داخلی (معمولاً نیازی به تغییر نیست) ---
# پورت HAProxy برای دریافت ترافیک
HAPROXY_FRONTEND_PORT="443"

# پورت Nginx برای proxy (فقط Mode B)
NGINX_INTERNAL_PORT="8444"

# پورت سرویس فعلی (که الان روی 443 هست و باید جابجا بشه)
EXISTING_SERVICE_PORT="8443"
